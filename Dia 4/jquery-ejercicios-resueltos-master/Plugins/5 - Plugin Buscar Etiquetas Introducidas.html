<!DOCTYPE html>
<!--
 @author Raúl Caro Pastorino
 @copyright Copyright © 2017 Raúl Caro Pastorino
 @license https://wwww.gnu.org/licenses/gpl.txt
-->

<!--
↓ INSTRUCCIONES DEL EJERCICIO ↓
Modificar el ejercicio anterior para que el usuario pueda decidir el tipo de etiquetas a mostrar.

En el caso de que ninguna sea indicada se buscarán solo las de tipo div.
-->
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Plugin Buscar Etiquetas Introducidas</title>
    <style type="text/css">

    </style>
    <script src="./jquery-3.2.1.js"></script>
    <script>
        (function($) {
            /**
             * Plugin que cuenta elemento pasado
             * @param  {Array} opciones Recibe un array con objetos selectores
             */
            $.contar = function(opciones) {
                // Creo la configuración por defecto que será sobreescrita
                var configuracion = {
                    elementos: [$('div')]
                };

                // Extiendo la configuración por defecto con la pasada
                $.extend(configuracion, opciones);

                // Recorre el array elementos y añade el mensaje y total
                var mensaje = '';
                $(configuracion.elementos).each(function() {
                    // Añade al mensaje final los datos del elemento actual
                    mensaje += '<br />El elemento ' + this.prop('tagName') +
                        ' se encuentra → ' + this.length +
                        ' veces en la página';
                });

                // Engancha al final del documento un párrafo con los resultados
                $('body').append(
                    '<p>' +
                    mensaje +
                    '</p>'
                );
                return this;
            };
        })(jQuery);
    </script>
    <script>
    window.onload = function() {
        //$.contar();
        // $.contar({
        //     elementos: [$('p'), $('div'), $('li')]
        //     //elementos: ['p', 'div', 'li']
        // })
        $.contar({
            elementos: [$(prompt('Introduce la etiqueta a buscar'))]
        });
    }
    </script>
</head>

<body>
    <h1>Plugin Buscar Etiquetas Introducidas</h1>

    <div>div 1</div>
    <div>div 2</div>
    <div>div 3</div>
    <div>div 4 con un <a href="#" title="Enlace">enlace</a></div>
    <p>p 1</p>
    <p>p 2</p>
    <p>p 3</p>
    <ul>
        <li>Lista 1</li>
        <li>Lista 2</li>
        <li>Lista 3</li>
        <li>Lista 4</li>
        <li>Lista 5</li>
        <li>Lista 6</li>
    </ul>
</body>
</html>
